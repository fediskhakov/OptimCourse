The issue we have to deal with is the compatibility of the domains and ranges of the functions.

1. All good

$$
g \circ f \colon \mathbb{R} \rightarrow \mathbb{R}, \;\; (g \circ f)(x) = \frac{\sin(x)}{1+\sin^2(x)}
$$

2. The range of $f(x)$ and the domain of $g(x)$ are disjoint, so the composition is not defined.

3. The points where $f(x)=1$ have to be excluded in the composition

$$
g \circ f \colon \mathbb{R}\setminus\{x: \cos(x)=1\} \rightarrow \mathbb{R}, \;\; (g \circ f)(x) = \frac{\cos(x)}{1-\cos(x)}
$$
